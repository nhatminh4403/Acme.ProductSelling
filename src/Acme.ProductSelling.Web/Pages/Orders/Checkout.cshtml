@page
@model Acme.ProductSelling.Web.Pages.Checkout.CheckoutModel
@using Acme.ProductSelling.Payments

@{
    ViewData["Title"] = L["UI:Titles:Checkout"];
    Layout = "/Views/Shared/_Layout.cshtml";
}

@section styles {
    <link href="~/css/global/orders/checkout.css" rel="stylesheet" />
}

@section scripts {
    <script src="~/js/checkout.js"></script>
}

<div class="container mt-4">
    <form method="post">
        <div class="row">
            @* Cột Thông tin giao hàng *@
            <div class="col-md-7">
                <h4>@L["Order:ShippingInformation"]</h4>
                <abp-validation-summary />
                <abp-alert-list />

                <abp-input asp-for="OrderInput.CustomerName" label="@L["Order:CustomerName"]"/>
                <abp-input asp-for="OrderInput.CustomerPhone" label="@L["Order:CustomerPhone"]" />
                <abp-input asp-for="OrderInput.ShippingAddress" type="textarea" rows="3" label="@L["Order:ShippingAddress"]" />
                <div class="mb-4">
                    <div class="payment-method-container">

                        <!-- Phương thức 1: COD (mặc định) -->
                        <label for="paymentCod" class="payment-method-option">
                            <input asp-for="OrderInput.PaymentMethod"
                                   type="radio"
                                   id="paymentCod"
                                   value="@PaymentMethods.COD"
                                   checked="checked"
                                   name="OrderInput.PaymentMethod" />
                            <span class="radio-icon"></span>
                            <img src="https://cdn.iconscout.com/icon/free/png-512/free-cod-icon-download-in-svg-png-gif-file-formats--credit-debit-bank-transaction-payment-methods-vol-1-pack-business-icons-32259.png?f=webp&w=512" alt="COD Logo" class="payment-logo" />
                            <div class="payment-details">
                                <h6>@L["Order:PaymentMethod:COD"] (COD)</h6>
                                <p>@L["Order:PaymentMethod:HelperDescription:COD"]</p>
                            </div>
                        </label>

                        <!-- Phương thức 2: VNPay -->
                        <label for="paymentVnPay" class="payment-method-option">
                            <input asp-for="OrderInput.PaymentMethod"
                                   type="radio"
                                   id="paymentVnPay"
                                   value="@PaymentMethods.VnPay"
                                   name="OrderInput.PaymentMethod" />
                            <span class="radio-icon"></span>
                            <img src="https://vinadesign.vn/uploads/thumbnails/800/2023/05/vnpay-logo-vinadesign-25-12-59-16.jpg" alt="VNPay Logo" class="payment-logo" />
                            <div class="payment-details">
                                <h6>@L["Order:PaymentMethod:VnPay"]</h6>
                                <p>@L["Order:PaymentMethod:HelperDescription:VnPay"]</p>
                            </div>
                        </label>

                        <!-- Phương thức 3: MoMo (Ví dụ) -->
                        <label for="paymentMoMo" class="payment-method-option">
                            <input asp-for="OrderInput.PaymentMethod"
                                   type="radio"
                                   id="paymentMoMo"
                                   value="@PaymentMethods.MoMo"
                                   name="OrderInput.PaymentMethod" />
                            <span class="radio-icon"></span>
                            <img src="https://upload.wikimedia.org/wikipedia/vi/f/fe/MoMo_Logo.png?20201011055544" alt="MoMo Logo" class="payment-logo" />
                            <div class="payment-details">
                                <h6>@L["Order:PaymentMethod:MoMo"]</h6>
                                <p>@L["Order:PaymentMethod:HelperDescription:MoMo"]</p>
                            </div>
                        </label>

                        <!-- Phương thức 4: Thẻ quốc tế (Ví dụ) -->
                        <label for="paymentPaypal" class="payment-method-option">
                            <input asp-for="OrderInput.PaymentMethod"
                                   type="radio"
                                   id="paymentPaypal"
                                   value="@PaymentMethods.PayPal"
                                   name="OrderInput.PaymentMethod" />
                            <span class="radio-icon"></span>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/PayPal_Logo_Icon_2014.svg/730px-PayPal_Logo_Icon_2014.svg.png?20230314143227" alt="International Card" class="payment-logo" />
                            <div class="payment-details">
                                <h6>@L["Order:PaymentMethod:PayPal"]</h6>
                                <p>@L["Order:PaymentMethod:HelperDescription:PayPal"]</p>
                            </div>
                        </label>

                    </div>

                </div>
            </div>

            @* Cột Tóm tắt đơn hàng *@
            <div class="col-md-5">
                <h4>@L["Order:Summary"]</h4>
                @if (Model.CurrentCart != null && Model.CurrentCart.CartItems.Any())
                {
                    <ul class="list-group mb-3">
                        @foreach (var item in Model.CurrentCart.CartItems)
                        {
                            <li class="list-group-item d-flex justify-content-between lh-sm">
                                <div>
                                    <h6 class="my-0">@item.ProductName</h6>
                                    <small class="text-muted">@L["Order:Quantity"]: @item.Quantity</small>
                                </div>
                                <span class="text-muted">@item.LineTotal.ToString("C0", CultureInfo.GetCultureInfo("vi-VN"))</span>
                            </li>
                        }
                        <li class="list-group-item d-flex justify-content-between">
                            <span>@L["Order:Subtotal"]</span>
                            <strong>@Model.CurrentCart.TotalPrice.ToString("C0", CultureInfo.GetCultureInfo("vi-VN"))</strong>
                        </li>
                        @* Thêm phí ship, discount nếu có *@
                        <li class="list-group-item d-flex justify-content-between fw-bold fs-5">
                            <span>@L["Order:Total"]</span>
                            <strong>@Model.CurrentCart.TotalPrice.ToString("C0", CultureInfo.GetCultureInfo("vi-VN"))</strong>
                        </li>
                    </ul>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">@L["Order:PlaceOrder"]</button>
                    </div>
                }
                else
                {
                    <div class="alert alert-warning">@L["Cart:YourCartIsEmpty"]</div>
                }
            </div>
        </div>
        <span asp-validation-for="OrderInput" class="text-danger d-block mt-2"></span>
    </form>
</div>
