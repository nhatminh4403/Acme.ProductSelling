@using Volo.Abp.UI.Navigation
@using Volo.Abp.AspNetCore.Mvc.UI.Theme.LeptonXLite.Themes.LeptonXLite.Components.Menu
@model MenuViewModel



<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">
            <div class="logo-icon">
                <i class="fas fa-bolt"></i>
            </div>
            <div class="logo-text">
                <div class="logo-title">@L["AppName"]</div>
                <div class="logo-subtitle">@L["Dashboard"]</div>
            </div>
        </div>
        <button class="sidebar-logout-btn" onclick="handleLogout()" id="logout-btn" title="Logout">
            <i class="fas fa-sign-out-alt"></i>
        </button>
    </div>
    @{
        var currentPath = Context.Request.Path.Value?.TrimEnd('/') ?? "";
    }

    @functions {
        public bool IsMenuItemActive(ApplicationMenuItem menuItem, string currentPath)
        {
            var menuItemUrl = menuItem.Url?.TrimEnd('/') ?? "";
            if (!string.IsNullOrEmpty(menuItemUrl) && currentPath.Equals(menuItemUrl, StringComparison.OrdinalIgnoreCase))
            {
                return true;
            }
            if (!menuItem.Items.Any())
            {
                return false;
            }
            return menuItem.Items.Any(subItem => IsMenuItemActive(subItem, currentPath));
        }
    }

    <ul style="list-style: none; padding: 0;">
        @await Html.PartialAsync("~/Pages/Admin/Shared/Components/Menu/_MenuItem.cshtml", Model.Menu.Items, new ViewDataDictionary(ViewData)
        {
            { "CurrentPath", currentPath },
                { "Level", 1 },
                { "IsActiveChecker", (Func<ApplicationMenuItem, string, bool>)IsMenuItemActive }
        })
    </ul>
</aside>

<div class="overlay" id="overlay"></div>
