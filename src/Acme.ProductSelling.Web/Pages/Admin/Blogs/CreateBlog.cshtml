@page "/admin/blogs/create"
@model Acme.ProductSelling.Web.Pages.Admin.Blogs.CreateBlogModel
@using Acme.ProductSelling.Localization;
@using Microsoft.Extensions.Localization
@using Volo.Abp.Users

@inject ICurrentUser CurrentUser
@inject IStringLocalizer<ProductSellingResource> L

@{
    ViewData["Title"] = L["UI:Title:CreateNewBlog"];
}


@* @section styles {
    <abp-style src="/lib/summernote/summernote-bs5.min.css"></abp-style>
    <link href="~" rel="stylesheet" />
} *@

@section scripts {
    <script src="https://cdn.ckeditor.com/ckeditor5/46.0.3/ckeditor5.umd.js" crossorigin=""></script>

    <script src="~/js/admin/blogs/ck-editor-main.js"></script>

    <script src="/js/admin/blogs/create.js" > </script>
}
@section styles {
    <link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/46.0.3/ckeditor5.css" crossorigin>
    <link href="~/css/admin/blogs/create.css" rel="stylesheet" />
}


<div class="blog-create-header">
    <div class="header-content">
        <h1>
            <span class="header-icon">✍️</span>
            @L["UI:Title:CreateNewBlog"]
        </h1>
    </div>
</div>

<form method="post" id="blogForm" enctype="multipart/form-data">
    @Html.AntiForgeryToken()

    <div class="row">
        <!-- Main Content Column -->
        <div class="col-lg-8">
            
            <!-- Content Editor -->
            <div class="custom-card sidebar-sticky">
                <div class="custom-card-header">
                    <i class="fas fa-edit"></i>
                    <span>@L["Content"]</span>
                </div>
                <div class="custom-card-body">
                    <div class="form-group">
                        <abp-label asp-for="Blog.Content" required="true" />
                        <div class="editor-wrapper">
                            <div class="editor-container">
                                <div id="editor"></div>
                            </div>
                        </div>
                        <abp-input asp-for="Blog.Content" suppress-label="true" class="d-none" />
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="sidebar-sticky">
                <div class="custom-card">
                    <div class="custom-card-header">
                        <i class="fas fa-file-alt"></i>
                        <span>@L["BasicInformation"]</span>
                    </div>
                    <div class="custom-card-body">
                        <!-- Title -->
                        <div class="form-group">
                            <abp-label asp-for="Blog.Title" />
                            <abp-input asp-for="Blog.Title" class="form-control" readonly="true" />
                            <small class="form-text">@L["LeaveBlankToAutoGenerate"]</small>
                        </div>

                        <!-- URL Slug -->
                        <div class="form-group">
                            <abp-label asp-for="Blog.UrlSlug" />
                            <div class="input-group">
                                <abp-input asp-for="Blog.UrlSlug" class="form-control" readonly="true" />
                                <i class="fas fa-link input-group-icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="custom-card">
                    <div class="custom-card-header">
                        <i class="fas fa-image"></i>
                        <span>@L["MainImage"]</span>
                    </div>
                    <div class="custom-card-body">
                        <abp-input asp-for="Blog.MainImageId" suppress-label="true" class="d-none" />

                        <div class="image-upload-area" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p class="mb-2 fw-bold">Drop image here or click to upload</p>
                            <abp-input asp-for="CoverImageFile" type="file" accept="image/*" />
                        </div>

                        <div id="mainImagePreview" class="mt-3" style="display: none;">
                            <img id="mainImageImg" src="" alt="Main Image Preview">
                            <div class="image-actions">
                                <button type="button" class="btn-danger-gradient" id="removeMainImageBtn">
                                    <i class="fas fa-trash me-1"></i>
                                    @L["Remove"]
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Main Image -->
                <div class="custom-card">
                    <div class="custom-card-header">
                        <i class="fas fa-rocket"></i>
                        <span>@L["Publishing"]</span>
                    </div>
                    <div class="custom-card-body">
                        <div class="form-group">
                            <abp-input asp-for="Blog.PublishedDate" label="@L["PublishedDate"]" required="true" />
                        </div>
                        <div class="form-group">
                            <abp-input asp-for="Blog.Author" label="@L["Author"]" required="true" placeholder="@L["AuthorName"]" />
                        </div>
                        <div class="form-group mt-4">
                            <button type="submit" class="btn-primary-gradient">
                                <i class="fas fa-paper-plane me-2"></i>
                                @L["CreateBlogPost"]
                            </button>
                        </div>
                    </div>
                </div>

                
        
                <!-- Statistics -->
                <div class="custom-card">
                    <div class="custom-card-header">
                        <i class="fas fa-chart-line"></i>
                        <span>@L["Statistics"]</span>
                    </div>
                    <div class="custom-card-body">
                        <div class="stats-container">
                            <div class="stat-card">
                                <div class="value" id="wordCount">0</div>
                                <div class="label">@L["Words"]</div>
                            </div>
                            <div class="stat-card">
                                <div class="value" id="readingTime">0</div>
                                <div class="label">Min Read</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
