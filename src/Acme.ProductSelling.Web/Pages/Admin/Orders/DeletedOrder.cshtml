@page "/admin/orders/deleted"
@model Acme.ProductSelling.Web.Pages.Admin.Orders.DeletedOrderModel
@{
    ViewData["Title"] = L["Orders:DeletedOrders"];
    Layout = "/Pages/Admin/Shared/_AdminLayout.cshtml";
}

<abp-card>
    <abp-card-header>
        <abp-row>
            <abp-column size-md="_6">
                <abp-card-title>@L["Orders:DeletedOrders"]</abp-card-title>
            </abp-column>
            <abp-column size-md="_6" class="text-end">
                <a href="@Url.Page("/Admin/Orders/Index")" class="btn btn-secondary">
                    @L["BackToList"]
                </a>
            </abp-column>
        </abp-row>
    </abp-card-header>
    <abp-card-body>

        <!-- Using a standard HTML table for data presentation -->
        <table class="table table-striped table-bordered" id="DeletedOrdersTable">
            <thead>
                <tr>
                    <th>@L["Order:OrderNumber"]</th>
                    <th>@L["CustomerName"]</th>
                    <th>@L["Order:TotalAmount"]</th>
                    <th>@L["Order:OrderDate"]</th>
                    <th>@L["DeletedOn"]</th>
                    <th>@L["Actions"]</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.DeletedOrders.TotalCount == 0)
                {
                    <tr>
                        <td colspan="6" class="text-center">@L["NoDeletedOrdersFound"]</td>
                    </tr>
                }

                @foreach (var order in Model.DeletedOrders.Items)
                {
                    <tr data-row-id="@order.Id">
                        <td>
                            <a href="@Url.Page("/Admin/Orders/Details", new { id = order.Id })">
                                @order.OrderNumber
                            </a>
                        </td>
                        <td>@order.CustomerName</td>
                        <td>@order.TotalAmount.ToString("N0") VNĐ</td>
                        <td>@order.OrderDate.ToShortDateString()</td>
                        <td>
                            @if (order.DeletionTime.HasValue)
                            {
                                @order.DeletionTime.Value.ToString("g")
                            }
                        </td>
                        <td>
                            @* --- THIS IS THE KEY CHANGE --- *@
                            @* Remove the <form> and use a standard button with a class and data-id *@
                            <button class="btn btn-sm btn-primary restore-button" data-id="@order.Id">
                                @L["Restore"]
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- You can add pagination controls here if needed -->

    </abp-card-body>
</abp-card>