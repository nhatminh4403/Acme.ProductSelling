@page "/products/{id:Guid}"
@model Acme.ProductSelling.Web.Pages.Products.ProductDetailModel
@using Acme.ProductSelling.Localization
@using Microsoft.Extensions.Localization
@using Acme.ProductSelling.Categories
@inject IStringLocalizer<ProductSellingResource> L
@{
    ViewData["Title"] = Model.Product?.ProductName ?? L["ProductDetail"];
}

@if (Model.Product != null)
{
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-6">

            </div>
            <div class="col-md-6">
                @* Thông tin chung *@
                <h2>@Model.Product.ProductName</h2>
                <p class="text-muted">@L["Category"]: @Model.Product.CategoryName</p>
                <p>@Model.Product.Description</p>
                <h3 class="text-danger my-3">@Model.Product.Price.ToString("C0", System.Globalization.CultureInfo.GetCultureInfo("vi-VN"))</h3>
                @if( Model.Product.StockCount > 0)
                {
                    <p>@L["StockCount"]: @Model.Product.StockCount</p>
                }
                else
                {
                    <p>@L["StockCount"]: Hết hàng</p>
                }

                @* (Optional) Nút thêm vào giỏ hàng *@
                <button class="btn btn-primary btn-lg mt-3">@L["AddToCart"]</button>
            </div>
        </div>

        <hr class="my-4" />

        @* --- Phần Hiển thị Specifications --- *@
        <div class="row">
            <div class="col-12">
                <h4>@L["Specifications"]</h4>

                @switch (Model.Product.CategorySpecificationType)
                {
                    case SpecificationType.Monitor:
                        @if (Model.Product.MonitorSpecification != null)
                        {
                            <partial name="_MonitorSpecsPartial" model="Model.Product.MonitorSpecification" />
                        }
                        break;
                    case SpecificationType.Mouse:
                        @if (Model.Product.MouseSpecification != null)
                        {
                            <partial name="_MouseSpecsPartial" model="Model.Product.MouseSpecification" />
                        }
                        break;
                    case SpecificationType.CPU:
                        @if (Model.Product.CpuSpecification != null)
                        {

                            <partial name="/Pages/Shared/Components/ProductSpecs/_CpuSpecsPartial.cshtml" model="Model.Product.CpuSpecification" />
                        }
                        else
                        {
                            <p> @Model.Product.CpuSpecification</p>
                        }
                        break;
                    case SpecificationType.GPU:
                        @if (Model.Product.GpuSpecification != null)
                        {
                            <partial name="_GpuSpecsPartial" model="Model.Product.GpuSpecification" />
                        }
                        break;
                    case SpecificationType.RAM:
                        @if (Model.Product.RamSpecification != null)
                        {
                            <partial name="_RamSpecsPartial" model="Model.Product.RamSpecification" />
                        }
                        break;
                    case SpecificationType.Motherboard:
                        @if (Model.Product.MotherboardSpecification != null)
                        {
                            <partial name="_MotherboardSpecsPartial" model="Model.Product.MotherboardSpecification" />
                        }
                        break;
                    case SpecificationType.Storage:
                        @if (Model.Product.StorageSpecification != null)
                        {
                            <partial name="_StorageSpecsPartial" model="Model.Product.StorageSpecification" />
                        }
                        break;
                    case SpecificationType.PSU:
                        @if (Model.Product.PsuSpecification != null)
                        {
                            <partial name="_PsuSpecsPartial" model="Model.Product.PsuSpecification" />
                        }
                        break;
                    case SpecificationType.Case:
                        @if (Model.Product.CaseSpecification != null)
                        {
                            <partial name="_CaseSpecsPartial" model="Model.Product.CaseSpecification" />
                        }
                        break;
                    case SpecificationType.CPUCooler:
                        @if (Model.Product.CpuCoolerSpecification != null)
                        {
                            <partial name="_CpuCoolerSpecsPartial" model="Model.Product.CpuCoolerSpecification" />
                        }
                        break;
                    case SpecificationType.Keyboard:
                        @if (Model.Product.KeyboardSpecification != null)
                        {
                            <partial name="_KeyboardSpecsPartial" model="Model.Product.KeyboardSpecification" />
                        }
                        break;
                    case SpecificationType.Headset:
                        @if (Model.Product.HeadsetSpecification != null)
                        {
                            <partial name="_HeadsetSpecsPartial" model="Model.Product.HeadsetSpecification" />
                        }
                        break;
                    // Thêm các case khác nếu có (Laptop,...)
                    default:
                        <p>@L["NoSpecificSpecifications"]</p>

                        <p>@Model.Product.CategorySpecificationType</p>
                        break;
                }
            </div>
        </div>
        @* --- Kết thúc Phần Specifications --- *@

    </div>
}
else
{
    <div class="alert alert-warning">@L["ProductNotFound"]</div>
}